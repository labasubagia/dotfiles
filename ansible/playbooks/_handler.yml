# this playbook to run any task dynamically based on `task_file` variable
# use case: testing, run individual task_file, delete pkg, etc
# example:
# ansible-playbook ansible/playbooks/_handler.yml -e '{"task_file": "../tasks/dev/mise/setup-common.yml", "is_remove": true}' -K
---
- name: Handler
  hosts: "{{ _hosts | default('debian') }}"
  connection: "{{ _connection | default('ssh') }}"
  vars:
    is_remove: false
    _task_file: "{{ workdir }}/{{ task_file | default('ansible/tasks/hello.yml') }}"
  tasks:
    - name: Pre ansible galaxy
      ansible.builtin.include_tasks: "{{ workdir }}/ansible/tasks/tools/ansible/pre-galaxy.yml"

    - name: Run Tasks
      ansible.builtin.include_tasks: "{{ _task_file }}"
